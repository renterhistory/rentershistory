<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>RentersHistory ‚Äî Archive of Tenancies</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --bg-primary: #f5f1eb;
            --bg-secondary: #e8e2d9;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --accent: #c17f59;
            --accent-dark: #a66d4a;
            --border: #d4cfc7;
            --white: #ffffff;
            --shadow: rgba(0, 0, 0, 0.04);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            background: linear-gradient(to bottom, var(--bg-primary) 80%, transparent);
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .logo {
            font-size: 13px;
            font-weight: 600;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-primary);
            text-decoration: none;
            white-space: nowrap;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
            list-style: none;
            flex-wrap: wrap;
        }
        
        .nav-links a {
            font-size: 13px;
            color: var(--text-secondary);
            text-decoration: none;
            letter-spacing: 0.05em;
            transition: color 0.3s;
            position: relative;
            white-space: nowrap;
        }
        
        .nav-links a:hover {
            color: var(--text-primary);
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--accent);
            transition: width 0.3s;
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .nav-right {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .auth-btn {
            background: none;
            border: 1px solid var(--border);
            padding: 6px 12px;
            font-size: 12px;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-secondary);
            white-space: nowrap;
        }
        
        .auth-btn:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
        }
        
        .auth-btn.signup {
            background: var(--text-primary);
            color: var(--white);
            border-color: var(--text-primary);
        }
        
        .auth-btn.signup:hover {
            background: var(--accent);
            border-color: var(--accent);
        }
        
        #userInfo {
            display: none;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        #userEmail {
            font-size: 13px;
            color: var(--text-primary);
            font-weight: 500;
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        #logoutBtn {
            background: none;
            border: 1px solid var(--border);
            padding: 4px 10px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #logoutBtn:hover {
            border-color: var(--text-primary);
        }
        
        /* Hero Section */
        .hero {
            min-height: 85vh;
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 100px 24px 40px;
            background: var(--bg-primary);
            position: relative;
        }
        
        .hero-label {
            font-size: 11px;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .hero-title {
            font-size: clamp(36px, 8vw, 80px);
            font-weight: 300;
            line-height: 1.1;
            letter-spacing: -0.02em;
            margin-bottom: 24px;
            max-width: 100%;
        }
        
        .hero-title span {
            font-weight: 500;
            display: block;
        }
        
        .hero-description {
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-secondary);
            max-width: 100%;
            margin-bottom: 30px;
        }
        
        .hero-cta {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 14px 28px;
            background: var(--text-primary);
            color: var(--white);
            text-decoration: none;
            font-size: 12px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            width: fit-content;
        }
        
        .hero-cta:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }
        
        .hero-visual {
            position: relative;
            background: var(--bg-secondary);
            overflow: hidden;
            min-height: 300px;
        }
        
        .building-pattern {
            position: absolute;
            inset: 0;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 2px;
            opacity: 0.15;
        }
        
        .building-pattern div {
            background: var(--text-primary);
            clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
            transform: scaleY(0.8);
            transition: all 0.2s;
        }
        
        .building-pattern div:nth-child(odd) {
            transform: scaleY(1);
            background: var(--accent);
        }
        
        .building-pattern div:nth-child(3n) {
            transform: scaleY(0.6);
        }
        
        .floating-shapes {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 30% 50%, rgba(193,127,89,0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(0,0,0,0.05) 0%, transparent 50%);
        }
        
        .hero-overlay {
            position: absolute;
            bottom: 24px;
            left: 24px;
            right: 24px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            color: var(--white);
            z-index: 10;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .hero-stats {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
        }
        
        .stat-number {
            font-size: clamp(24px, 5vw, 32px);
            font-weight: 300;
            line-height: 1;
        }
        
        .stat-label {
            font-size: 10px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            opacity: 0.8;
            margin-top: 4px;
        }
        
        /* Search Section */
        .search-section {
            padding: 60px 20px;
            background: var(--white);
            border-bottom: 1px solid var(--border);
        }
        
        .search-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 40px;
        }
        
        .search-filters {
            position: sticky;
            top: 100px;
            height: fit-content;
        }
        
        .filter-title {
            font-size: 11px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 20px;
            font-weight: 600;
        }
        
        .filter-group {
            margin-bottom: 32px;
        }
        
        .filter-label {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 12px;
            display: block;
        }
        
        .rating-filters {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .rating-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 14px;
            background: transparent;
            border: 1px solid var(--border);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            text-align: left;
            width: 100%;
        }
        
        .rating-btn:hover, .rating-btn.active {
            background: var(--text-primary);
            color: var(--white);
            border-color: var(--text-primary);
        }
        
        .stars {
            letter-spacing: 2px;
            font-size: 12px;
        }
        
        .search-main {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .search-bar {
            position: relative;
        }
        
        .search-bar input {
            width: 100%;
            padding: 16px 20px;
            padding-left: 50px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s;
            outline: none;
        }
        
        .search-bar input:focus {
            background: var(--white);
            border-color: var(--text-primary);
        }
        
        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .results-count {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .sort-select {
            padding: 6px 12px;
            border: 1px solid var(--border);
            background: transparent;
            font-size: 13px;
            cursor: pointer;
            font-family: inherit;
        }
        
        .records-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .record-card {
            background: var(--white);
            border: 1px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .record-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px var(--shadow);
            border-color: var(--text-primary);
        }
        
        .record-image {
            width: 100%;
            height: 200px;
            background: var(--bg-secondary);
            position: relative;
            overflow: hidden;
        }
        
        .record-image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            opacity: 0.3;
        }
        
        .record-rating-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: var(--white);
            padding: 6px 10px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.1em;
        }
        
        .record-content {
            padding: 20px;
        }
        
        .record-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .record-title {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.3;
            margin: 0;
        }
        
        .record-location {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        .record-meta {
            display: flex;
            gap: 12px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            font-size: 11px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
            flex-wrap: wrap;
        }
        
        .record-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .would-again {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 10px;
            font-size: 11px;
            font-weight: 500;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        
        .would-again.yes {
            color: #5a7c5a;
        }
        
        .would-again.no {
            color: #c45c5c;
        }
        
        .card-actions {
            position: absolute;
            top: 12px;
            left: 12px;
            display: flex;
            gap: 6px;
            opacity: 0;
            transform: translateY(-8px);
            transition: all 0.3s;
        }
        
        .record-card:hover .card-actions {
            opacity: 1;
            transform: translateY(0);
        }
        
        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .action-btn:hover {
            background: var(--text-primary);
            color: var(--white);
        }
        
        /* Add Record Section */
        .add-section {
            padding: 80px 20px;
            background: var(--bg-secondary);
        }
        
        .add-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 48px;
        }
        
        .section-label {
            font-size: 11px;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--accent);
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .section-title {
            font-size: clamp(28px, 5vw, 42px);
            font-weight: 300;
            line-height: 1.2;
        }
        
        .record-form {
            background: var(--white);
            padding: 30px 25px;
            border: 1px solid var(--border);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-label {
            font-size: 11px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .form-input, .form-select, .form-textarea {
            padding: 12px 14px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s;
            outline: none;
            width: 100%;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            background: var(--white);
            border-color: var(--text-primary);
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 24px 0;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            flex-wrap: wrap;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--text-primary);
        }
        
        .checkbox-label {
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .form-actions {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 14px 24px;
            font-size: 12px;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s;
            border: none;
            font-family: inherit;
        }
        
        .btn-primary {
            background: var(--text-primary);
            color: var(--white);
            flex: 1;
            min-width: 160px;
        }
        
        .btn-primary:hover {
            background: var(--accent);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
        }
        
        /* Login prompt inside add section */
        .login-prompt {
            text-align: center;
            padding: 40px 20px;
            background: var(--white);
            border: 1px solid var(--border);
        }
        
        .login-prompt p {
            margin-bottom: 20px;
            color: var(--text-secondary);
        }
        
        /* Disclaimer Modal */
        .disclaimer-modal {
            position: fixed;
            inset: 0;
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(12px);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            padding: 20px;
        }
        
        .disclaimer-modal.active {
            display: flex;
            opacity: 1;
        }
        
        .disclaimer-content {
            background: var(--white);
            max-width: 600px;
            width: 100%;
            padding: 30px 25px;
            position: relative;
            border: 1px solid var(--border);
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .disclaimer-title {
            font-size: 22px;
            font-weight: 400;
            margin-bottom: 20px;
        }
        
        .disclaimer-text {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 28px;
            line-height: 1.8;
        }
        
        .disclaimer-text p {
            margin-bottom: 14px;
        }
        
        .disclaimer-text strong {
            color: var(--text-primary);
        }
        
        .disclaimer-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 28px;
            padding: 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
        }
        
        .disclaimer-checkbox input {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            accent-color: var(--text-primary);
            flex-shrink: 0;
        }
        
        .disclaimer-checkbox label {
            font-size: 13px;
            color: var(--text-primary);
            font-weight: 500;
            line-height: 1.5;
        }
        
        .disclaimer-actions {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }
        
        .btn-outline:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
        }
        
        /* Auth Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        
        .modal {
            background: var(--white);
            width: 100%;
            max-width: 480px;
            padding: 30px 25px;
            position: relative;
            transform: translateY(20px);
            transition: transform 0.3s;
        }
        
        .modal-overlay.active .modal {
            transform: translateY(0);
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s;
        }
        
        .modal-close:hover {
            color: var(--text-primary);
        }
        
        .modal-title {
            font-size: 22px;
            font-weight: 400;
            margin-bottom: 6px;
        }
        
        .modal-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 28px;
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            left: 20px;
            background: var(--text-primary);
            color: var(--white);
            padding: 14px 20px;
            font-size: 14px;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 4000;
            border-left: 4px solid var(--accent);
            max-width: 400px;
            margin-left: auto;
        }
        
        @media (max-width: 500px) {
            .toast {
                left: 20px;
                right: 20px;
                max-width: none;
            }
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            border-left-color: #c45c5c;
        }
        
        /* Footer */
        .footer {
            padding: 60px 20px;
            background: var(--text-primary);
            color: var(--white);
        }
        
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
        }
        
        .footer-brand {
            font-size: 13px;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 20px;
            display: block;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: var(--white);
            opacity: 0.6;
            text-decoration: none;
            font-size: 13px;
            transition: opacity 0.3s;
        }
        
        .footer-links a:hover {
            opacity: 1;
        }
        
        /* ===== MOBILE RESPONSIVE STYLES ===== */
        @media (max-width: 900px) {
            .search-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .search-filters {
                position: static;
            }
        }
        
        @media (max-width: 800px) {
            .hero {
                grid-template-columns: 1fr;
                min-height: auto;
            }
            
            .hero-content {
                padding: 80px 20px 40px;
            }
            
            .hero-visual {
                min-height: 300px;
            }
            
            .hero-overlay {
                position: relative;
                bottom: auto;
                left: auto;
                right: auto;
                padding: 30px 20px;
                color: var(--text-primary);
                background: rgba(255,255,255,0.1);
                backdrop-filter: blur(4px);
            }
            
            .hero-stats {
                justify-content: space-around;
                width: 100%;
            }
            
            .hero-stats .stat {
                color: var(--text-primary);
            }
        }
        
        @media (max-width: 600px) {
            .nav {
                flex-direction: column;
                align-items: stretch;
                background: var(--bg-primary);
                padding: 15px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            }
            
            .nav-left {
                justify-content: space-between;
                width: 100%;
            }
            
            .nav-links {
                gap: 12px;
            }
            
            .nav-right {
                justify-content: flex-end;
                width: 100%;
            }
            
            .records-grid {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .btn-primary, .btn-secondary {
                width: 100%;
            }
            
            .disclaimer-actions {
                flex-direction: column;
            }
            
            .modal {
                padding: 25px 20px;
            }
            
            .hero-title {
                font-size: 40px;
            }
        }
        
        @media (max-width: 400px) {
            .nav-left {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .nav-links {
                justify-content: center;
            }
            
            .hero-title {
                font-size: 32px;
            }
            
            .record-meta {
                flex-direction: column;
                gap: 6px;
            }
        }
    </style>
</head>
<body>
    <!-- Disclaimer Modal (shown after login if not accepted) -->
    <div class="disclaimer-modal" id="disclaimerModal">
        <div class="disclaimer-content">
            <h2 class="disclaimer-title">Privacy & Liability Notice</h2>
            <div class="disclaimer-text">
                <p><strong>RentersHistory</strong> is a private platform for landlords to share tenant history. By using this service, you acknowledge and agree to the following:</p>
                <p>‚Ä¢ All information entered is provided by landlords and may not be verified. We do not guarantee its accuracy.</p>
                <p>‚Ä¢ You are solely responsible for how you use this information. We disclaim all liability for any decisions made based on these records.</p>
                <p>‚Ä¢ You agree to comply with all applicable privacy laws (including PIPEDA, CCPA, GDPR) and will not use this data for unlawful purposes.</p>
                <p>‚Ä¢ You will not share tenant data outside this platform without consent.</p>
                <p>‚Ä¢ We may remove or flag inaccurate records but are not obligated to do so.</p>
                <p><strong>By accepting, you release RentersHistory and its operators from any and all liability arising from your use of the service.</strong></p>
            </div>
            <div class="disclaimer-checkbox">
                <input type="checkbox" id="acceptDisclaimer">
                <label for="acceptDisclaimer">I have read, understood, and agree to the above terms and release of liability.</label>
            </div>
            <div class="disclaimer-actions">
                <button class="btn btn-primary" id="acceptBtn" disabled>Continue</button>
                <button class="btn btn-outline" id="declineBtn">Logout</button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-left">
            <a href="/" class="logo">RentersHistory</a>
            <ul class="nav-links">
                <li><a href="#search">Search</a></li>
                <li><a href="#add">Add Record</a></li>
                <li><a href="#about">About</a></li>
            </ul>
        </div>
        <div class="nav-right">
            <div id="authButtons">
                <button class="auth-btn" id="showLoginBtn">Login</button>
                <button class="auth-btn signup" id="showSignupBtn">Sign Up</button>
            </div>
            <div id="userInfo">
                <span id="userEmail"></span>
                <button id="logoutBtn">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section with creative building pattern -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-label">Landlord Network</div>
            <h1 class="hero-title">
                <span>Know your</span>
                <span>tenant's history</span>
            </h1>
            <p class="hero-description">
                A private, landlord‚Äëto‚Äëlandlord database of rental records. 
                Search by name, email, or phone before you lease.
            </p>
            <a href="#add" class="hero-cta">
                <span>Add a record</span>
                <span>‚Üí</span>
            </a>
        </div>
        <div class="hero-visual">
            <div class="building-pattern">
                <div></div><div></div><div></div><div></div><div></div><div></div>
                <div></div><div></div><div></div><div></div><div></div><div></div>
                <div></div><div></div><div></div><div></div><div></div><div></div>
            </div>
            <div class="floating-shapes"></div>
            <div class="hero-overlay">
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-number" id="statRecords">0</span>
                        <span class="stat-label">Records</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" id="statLandlords">0</span>
                        <span class="stat-label">Landlords</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section id="search" class="search-section">
        <div class="search-container">
            <div class="search-filters">
                <h3 class="filter-title">Filters</h3>
                <div class="filter-group">
                    <span class="filter-label">Rating</span>
                    <div class="rating-filters" id="ratingFilters">
                        <button class="rating-btn active" data-rating="all">All <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></button>
                        <button class="rating-btn" data-rating="5">5 Stars <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></button>
                        <button class="rating-btn" data-rating="4">4 Stars <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê</span></button>
                        <button class="rating-btn" data-rating="3">3 Stars <span class="stars">‚≠ê‚≠ê‚≠ê</span></button>
                        <button class="rating-btn" data-rating="2">2 Stars <span class="stars">‚≠ê‚≠ê</span></button>
                        <button class="rating-btn" data-rating="1">1 Star <span class="stars">‚≠ê</span></button>
                    </div>
                </div>
            </div>

            <div class="search-main">
                <div class="search-bar">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search by name, email, or phone..." id="searchInput">
                </div>
                <div class="results-header">
                    <span class="results-count" id="resultsCount">0 records</span>
                    <select class="sort-select" id="sortSelect">
                        <option value="newest">Newest first</option>
                        <option value="oldest">Oldest first</option>
                        <option value="rating-high">Rating (high to low)</option>
                        <option value="rating-low">Rating (low to high)</option>
                    </select>
                </div>
                <div class="records-grid" id="resultsList"></div>
            </div>
        </div>
    </section>

    <!-- Add Record Section -->
    <section id="add" class="add-section">
        <div class="add-container">
            <div class="section-header">
                <div class="section-label">Contribute</div>
                <h2 class="section-title">Add a tenant record</h2>
            </div>
            <div id="addRecordContainer">
                <!-- Will be populated by JS based on login state -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div>
                <span class="footer-brand">RentersHistory</span>
                <p style="opacity:0.6; font-size:13px; max-width:300px;">A private community for landlords to share tenant histories.</p>
            </div>
            <div>
                <h4 style="font-size:11px; letter-spacing:0.2em; margin-bottom:20px; opacity:0.8;">NAVIGATION</h4>
                <ul class="footer-links">
                    <li><a href="#search">Search</a></li>
                    <li><a href="#add">Add record</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </div>
            <div>
                <h4 style="font-size:11px; letter-spacing:0.2em; margin-bottom:20px; opacity:0.8;">LEGAL</h4>
                <ul class="footer-links">
                    <li><a href="#">Privacy</a></li>
                    <li><a href="#">Terms</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="authModal">
        <div class="modal">
            <button class="modal-close" id="closeAuthModal">√ó</button>
            <h3 class="modal-title" id="authModalTitle">Login</h3>
            <p class="modal-subtitle" id="authModalSubtitle">Access the landlord network</p>
            <div class="auth-form">
                <input type="email" class="form-input" id="authEmail" placeholder="Email">
                <input type="password" class="form-input" id="authPassword" placeholder="Password">
                <button class="btn btn-primary" id="authActionBtn">Login</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDiheYBC7wNXLubShXxMwpGQcv3CVLB0XA",
            authDomain: "ice-alert-12bf1.firebaseapp.com",
            databaseURL: "https://ice-alert-12bf1-default-rtdb.firebaseio.com",
            projectId: "ice-alert-12bf1",
            storageBucket: "ice-alert-12bf1.firebasestorage.app",
            messagingSenderId: "273075375516",
            appId: "1:273075375516:web:6398c891ba9ad8ccb80c59"
        };

        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth();

        const tenantRecordsRef = database.ref('tenantRecords');
        const landlordsRef = database.ref('landlords');

        let allRecords = [];
        let currentUserId = null;
        let currentRatingFilter = 'all';
        let currentSearchTerm = '';
        let currentSort = 'newest';
        let editingId = null;

        // Disclaimer acceptance flag (stored in localStorage)
        let disclaimerAccepted = localStorage.getItem('rhDisclaimerAccepted') === 'true';

        // ------------------------------------------------------------------
        // Auth State Observer
        // ------------------------------------------------------------------
        auth.onAuthStateChanged(user => {
            if (user) {
                currentUserId = user.uid;
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('userEmail').textContent = user.email;

                landlordsRef.child(user.uid).set({
                    email: user.email,
                    lastActive: new Date().toISOString()
                });

                // Show disclaimer if not accepted
                if (!disclaimerAccepted) {
                    document.getElementById('disclaimerModal').classList.add('active');
                } else {
                    // Enable search/add
                    filterAndDisplay();
                    updateAddSection();
                }
            } else {
                currentUserId = null;
                document.getElementById('authButtons').style.display = 'flex';
                document.getElementById('userInfo').style.display = 'none';
                document.getElementById('resultsList').innerHTML = '<p style="color: #999; text-align: center; grid-column: 1/-1;">Please log in to view tenant records.</p>';
                document.getElementById('resultsCount').textContent = '0 records';
                updateAddSection();
            }
        });

        // ------------------------------------------------------------------
        // Firebase Listener (real-time)
        // ------------------------------------------------------------------
        function setupFirebaseListeners() {
            tenantRecordsRef.on('value', snapshot => {
                allRecords = [];
                snapshot.forEach(child => {
                    const record = child.val();
                    record.id = child.key;
                    allRecords.push(record);
                });
                document.getElementById('statRecords').textContent = allRecords.length;
                if (currentUserId && disclaimerAccepted) {
                    filterAndDisplay();
                }
            });

            landlordsRef.on('value', snapshot => {
                let count = 0;
                snapshot.forEach(() => count++);
                document.getElementById('statLandlords').textContent = count;
            });
        }

        // ------------------------------------------------------------------
        // Filter, Sort & Display
        // ------------------------------------------------------------------
        function filterAndDisplay() {
            if (!currentUserId || !disclaimerAccepted) return;

            let filtered = allRecords;

            if (currentSearchTerm) {
                const term = currentSearchTerm.toLowerCase();
                filtered = filtered.filter(record => 
                    (record.tenantName && record.tenantName.toLowerCase().includes(term)) ||
                    (record.tenantEmail && record.tenantEmail.toLowerCase().includes(term)) ||
                    (record.tenantPhone && record.tenantPhone.toLowerCase().includes(term))
                );
            }

            if (currentRatingFilter !== 'all') {
                const ratingVal = parseInt(currentRatingFilter);
                filtered = filtered.filter(record => record.rating === ratingVal);
            }

            filtered.sort((a, b) => {
                if (currentSort === 'newest') {
                    return (b.timestamp || 0) - (a.timestamp || 0);
                } else if (currentSort === 'oldest') {
                    return (a.timestamp || 0) - (b.timestamp || 0);
                } else if (currentSort === 'rating-high') {
                    return (b.rating || 0) - (a.rating || 0);
                } else if (currentSort === 'rating-low') {
                    return (a.rating || 0) - (b.rating || 0);
                }
                return 0;
            });

            displayRecords(filtered);
            document.getElementById('resultsCount').textContent = `${filtered.length} record${filtered.length !== 1 ? 's' : ''}`;
        }

        function displayRecords(records) {
            const resultsDiv = document.getElementById('resultsList');
            if (records.length === 0) {
                resultsDiv.innerHTML = '<p style="color: #999; text-align: center; grid-column: 1/-1;">No tenant records found.</p>';
                return;
            }

            let html = '';
            records.forEach(record => {
                const timeAgo = getTimeAgo(record.timestamp);
                const stars = '‚≠ê'.repeat(record.rating);
                const wouldAgainClass = record.wouldRentAgain ? 'yes' : 'no';
                const wouldAgainText = record.wouldRentAgain ? '‚úÖ Would rent again' : '‚ùå Would not rent again';
                const leaseInfo = `${record.leaseStart || '?'} ‚Äî ${record.leaseEnd || 'ongoing'}`;

                html += `
                    <div class="record-card" data-id="${record.id}">
                        <div class="record-image">
                            <div class="record-image-placeholder">üè†</div>
                            <div class="record-rating-badge">${stars}</div>
                        </div>
                        <div class="record-content">
                            <div class="record-header">
                                <h3 class="record-title">${escapeHtml(record.tenantName)}</h3>
                            </div>
                            <div class="record-location">${escapeHtml(record.propertyAddress || 'Address unknown')}</div>
                            <div class="record-meta">
                                <span>üìß ${escapeHtml(record.tenantEmail || 'no email')}</span>
                                <span>üìû ${escapeHtml(record.tenantPhone || 'no phone')}</span>
                            </div>
                            <div class="record-meta">
                                <span>üìÖ ${leaseInfo}</span>
                            </div>
                            <div class="would-again ${wouldAgainClass}">${wouldAgainText}</div>
                            ${record.comments ? `<div style="margin-top:8px; font-size:12px; color:var(--text-secondary);">‚Äú${escapeHtml(record.comments)}‚Äù</div>` : ''}
                        </div>
                        ${record.landlordId === currentUserId ? `
                            <div class="card-actions">
                                <button class="action-btn" onclick="editRecord('${record.id}')">‚úé</button>
                                <button class="action-btn" onclick="deleteRecord('${record.id}')">üóë</button>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        function updateAddSection() {
            const container = document.getElementById('addRecordContainer');
            if (!currentUserId) {
                container.innerHTML = `
                    <div class="login-prompt">
                        <p>Please log in to add a tenant record.</p>
                        <button class="btn btn-primary" id="promptLoginBtn">Login</button>
                    </div>
                `;
                document.getElementById('promptLoginBtn')?.addEventListener('click', () => {
                    document.getElementById('authModal').classList.add('active');
                });
            } else if (!disclaimerAccepted) {
                container.innerHTML = `
                    <div class="login-prompt">
                        <p>You must accept the privacy terms before adding records.</p>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div class="record-form" id="recordForm">
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">Full name *</label>
                                <input type="text" class="form-input" id="tenantName" placeholder="John Smith">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-input" id="tenantEmail" placeholder="john@example.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone</label>
                                <input type="tel" class="form-input" id="tenantPhone" placeholder="604-555-1234">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Property address *</label>
                                <input type="text" class="form-input" id="propertyAddress" placeholder="123 Main St, Surrey">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Lease start *</label>
                                <input type="date" class="form-input" id="leaseStart">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Lease end</label>
                                <input type="date" class="form-input" id="leaseEnd">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Rating</label>
                                <select class="form-select" id="rating">
                                    <option value="5">5 - Excellent</option>
                                    <option value="4">4 - Good</option>
                                    <option value="3">3 - Average</option>
                                    <option value="2">2 - Poor</option>
                                    <option value="1">1 - Very Poor</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Comments</label>
                                <textarea class="form-textarea" id="comments" placeholder="Payment history, property care, etc."></textarea>
                            </div>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="wouldRentAgain" checked>
                            <label for="wouldRentAgain" class="checkbox-label">Would rent to this tenant again</label>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary" id="submitRecordBtn">Submit record</button>
                            <button class="btn btn-secondary" id="cancelRecordBtn">Cancel</button>
                        </div>
                    </div>
                `;
                document.getElementById('submitRecordBtn').addEventListener('click', submitRecord);
                document.getElementById('cancelRecordBtn').addEventListener('click', resetForm);
            }
        }

        // ------------------------------------------------------------------
        // Helper Functions
        // ------------------------------------------------------------------
        function escapeHtml(unsafe) {
            if (!unsafe) return '';
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        function getTimeAgo(timestamp) {
            if (!timestamp) return 'Unknown date';
            const diff = Date.now() - new Date(timestamp).getTime();
            const sec = Math.floor(diff / 1000);
            if (sec < 60) return 'Just now';
            const min = Math.floor(sec / 60);
            if (min < 60) return `${min} minute${min>1?'s':''} ago`;
            const hrs = Math.floor(min / 60);
            if (hrs < 24) return `${hrs} hour${hrs>1?'s':''} ago`;
            const days = Math.floor(hrs / 24);
            return `${days} day${days>1?'s':''} ago`;
        }

        function showToast(msg, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = 'toast show';
            if (type === 'error') toast.classList.add('error');
            else if (type === 'warning') toast.classList.add('warning');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function resetForm() {
            if (!document.getElementById('tenantName')) return;
            document.getElementById('tenantName').value = '';
            document.getElementById('tenantEmail').value = '';
            document.getElementById('tenantPhone').value = '';
            document.getElementById('propertyAddress').value = '';
            document.getElementById('leaseStart').value = '';
            document.getElementById('leaseEnd').value = '';
            document.getElementById('rating').value = '5';
            document.getElementById('wouldRentAgain').checked = true;
            document.getElementById('comments').value = '';
            editingId = null;
            document.getElementById('submitRecordBtn').textContent = 'Submit record';
        }

        // ------------------------------------------------------------------
        // CRUD Operations
        // ------------------------------------------------------------------
        function submitRecord() {
            if (!currentUserId || !disclaimerAccepted) return;

            const tenantName = document.getElementById('tenantName').value.trim();
            const tenantEmail = document.getElementById('tenantEmail').value.trim();
            const tenantPhone = document.getElementById('tenantPhone').value.trim();
            const propertyAddress = document.getElementById('propertyAddress').value.trim();
            const leaseStart = document.getElementById('leaseStart').value;
            const leaseEnd = document.getElementById('leaseEnd').value || null;
            const rating = parseInt(document.getElementById('rating').value);
            const wouldRentAgain = document.getElementById('wouldRentAgain').checked;
            const comments = document.getElementById('comments').value.trim();

            if (!tenantName || !propertyAddress || !leaseStart) {
                showToast('Please fill in all required fields (*)', 'error');
                return;
            }

            const record = {
                landlordId: currentUserId,
                tenantName,
                tenantEmail,
                tenantPhone,
                propertyAddress,
                leaseStart,
                leaseEnd,
                rating,
                wouldRentAgain,
                comments,
                timestamp: new Date().toISOString()
            };

            if (editingId) {
                tenantRecordsRef.child(editingId).update(record)
                    .then(() => {
                        showToast('Record updated', 'success');
                        resetForm();
                    })
                    .catch(err => showToast('Error: ' + err.message, 'error'));
            } else {
                tenantRecordsRef.push(record)
                    .then(() => {
                        showToast('Record added', 'success');
                        resetForm();
                    })
                    .catch(err => showToast('Error: ' + err.message, 'error'));
            }
        }

        window.editRecord = function(recordId) {
            if (!currentUserId || !disclaimerAccepted) return;
            const record = allRecords.find(r => r.id === recordId);
            if (!record) return;

            if (!document.getElementById('tenantName')) {
                updateAddSection();
                setTimeout(() => populateEditForm(record), 50);
            } else {
                populateEditForm(record);
            }
        };

        function populateEditForm(record) {
            document.getElementById('tenantName').value = record.tenantName || '';
            document.getElementById('tenantEmail').value = record.tenantEmail || '';
            document.getElementById('tenantPhone').value = record.tenantPhone || '';
            document.getElementById('propertyAddress').value = record.propertyAddress || '';
            document.getElementById('leaseStart').value = record.leaseStart || '';
            document.getElementById('leaseEnd').value = record.leaseEnd || '';
            document.getElementById('rating').value = record.rating || 5;
            document.getElementById('wouldRentAgain').checked = record.wouldRentAgain !== false;
            document.getElementById('comments').value = record.comments || '';

            editingId = record.id;
            document.getElementById('submitRecordBtn').textContent = 'Update record';
            document.getElementById('add').scrollIntoView({ behavior: 'smooth' });
        }

        window.deleteRecord = function(recordId) {
            if (!currentUserId || !disclaimerAccepted) return;
            if (confirm('Permanently delete this record?')) {
                tenantRecordsRef.child(recordId).remove()
                    .then(() => showToast('Record deleted', 'success'))
                    .catch(err => showToast('Error: ' + err.message, 'error'));
            }
        };

        // ------------------------------------------------------------------
        // Event Listeners
        // ------------------------------------------------------------------
        document.addEventListener('DOMContentLoaded', function() {
            setupFirebaseListeners();

            const disclaimerModal = document.getElementById('disclaimerModal');
            const acceptCheck = document.getElementById('acceptDisclaimer');
            const acceptBtn = document.getElementById('acceptBtn');
            const declineBtn = document.getElementById('declineBtn');

            acceptCheck.addEventListener('change', function() {
                acceptBtn.disabled = !this.checked;
            });

            acceptBtn.addEventListener('click', function() {
                disclaimerAccepted = true;
                localStorage.setItem('rhDisclaimerAccepted', 'true');
                disclaimerModal.classList.remove('active');
                filterAndDisplay();
                updateAddSection();
            });

            declineBtn.addEventListener('click', function() {
                auth.signOut();
                disclaimerModal.classList.remove('active');
            });

            document.getElementById('showLoginBtn').addEventListener('click', () => {
                document.getElementById('authModalTitle').textContent = 'Login';
                document.getElementById('authModalSubtitle').textContent = 'Access the landlord network';
                document.getElementById('authActionBtn').textContent = 'Login';
                document.getElementById('authModal').classList.add('active');
            });

            document.getElementById('showSignupBtn').addEventListener('click', () => {
                document.getElementById('authModalTitle').textContent = 'Sign Up';
                document.getElementById('authModalSubtitle').textContent = 'Create a landlord account';
                document.getElementById('authActionBtn').textContent = 'Sign Up';
                document.getElementById('authModal').classList.add('active');
            });

            document.getElementById('closeAuthModal').addEventListener('click', () => {
                document.getElementById('authModal').classList.remove('active');
            });

            document.getElementById('authActionBtn').addEventListener('click', () => {
                const email = document.getElementById('authEmail').value.trim();
                const password = document.getElementById('authPassword').value;
                const mode = document.getElementById('authModalTitle').textContent;

                if (!email || !password) {
                    showToast('Email and password required', 'error');
                    return;
                }

                if (mode === 'Login') {
                    auth.signInWithEmailAndPassword(email, password)
                        .then(() => {
                            document.getElementById('authModal').classList.remove('active');
                            showToast('Logged in', 'success');
                        })
                        .catch(err => showToast(err.message, 'error'));
                } else {
                    auth.createUserWithEmailAndPassword(email, password)
                        .then(() => {
                            document.getElementById('authModal').classList.remove('active');
                            showToast('Account created', 'success');
                        })
                        .catch(err => showToast(err.message, 'error'));
                }
            });

            document.getElementById('logoutBtn').addEventListener('click', () => {
                auth.signOut().then(() => showToast('Logged out', 'success'));
            });

            document.getElementById('searchInput').addEventListener('input', function(e) {
                currentSearchTerm = e.target.value;
                filterAndDisplay();
            });

            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentRatingFilter = this.getAttribute('data-rating');
                    filterAndDisplay();
                });
            });

            document.getElementById('sortSelect').addEventListener('change', function(e) {
                currentSort = e.target.value;
                filterAndDisplay();
            });

            document.querySelector('.hero-cta').addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('add').scrollIntoView({ behavior: 'smooth' });
            });

            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href');
                    if (target && target !== '#') {
                        document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            updateAddSection();
        });
    </script>
</body>
</html>
